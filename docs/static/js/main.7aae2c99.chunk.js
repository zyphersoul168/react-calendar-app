(this["webpackJsonpcalendar-app"]=this["webpackJsonpcalendar-app"]||[]).push([[0],{120:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(9),r=n.n(c),s=(n(73),n(8)),o=n(28),l=n(65),i=n(5),d="[ui] open modal",u="[ui] close modal",j="[event] set active",b="[event] logout",m="[event] add new",h="[event] clear active",p="[event] updated",x="[event] deleted",O="[event] get events",f="[auth] finish checking login state",v="[auth] login",g="[auth] logout",y={checking:!0},k=n(54),w={events:[],activeEvent:null},N={modalOpen:!1},E=Object(o.b)({ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d:return Object(i.a)(Object(i.a)({},e),{},{modalOpen:!0});case u:return Object(i.a)(Object(i.a)({},e),{},{modalOpen:!1});default:return e}},calendar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return Object(i.a)(Object(i.a)({},e),{},{activeEvent:t.payload});case m:return Object(i.a)(Object(i.a)({},e),{},{events:[].concat(Object(k.a)(e.events),[t.payload])});case h:return Object(i.a)(Object(i.a)({},e),{},{activeEvent:null});case p:return Object(i.a)(Object(i.a)({},e),{},{events:e.events.map((function(e){return e._id===t.payload._id?t.payload:e}))});case x:return Object(i.a)(Object(i.a)({},e),{},{events:e.events.filter((function(t){return t._id!==e.activeEvent._id})),activeEvent:null});case O:return Object(i.a)(Object(i.a)({},e),{},{events:Object(k.a)(t.payload)});case b:return Object(i.a)({},w);default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(i.a)(Object(i.a)(Object(i.a)({},e),t.payload),{},{checking:!1});case g:return{checking:!1};case f:return Object(i.a)(Object(i.a)({},e),{},{checking:!1});default:return e}}}),S="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.c,C=Object(o.d)(E,S(Object(o.a)(l.a))),D=n(17),_=n(10),T=n(12),I=n.n(T),A=n(22),P=n(19),L=n.n(P),z="https://kalendar-react-app.herokuapp.com/api",M=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(z,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},G=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(z,"/").concat(e),c=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":c}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":c},body:JSON.stringify(t)})},J=n(20),V=n.n(J),H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{end:V()(e.end).toDate(),start:V()(e.start).toDate()})}))},U=function(e){return{type:m,payload:e}},B=function(e){return{type:p,payload:e}},R=function(){return{type:x}},X=function(e){return{type:O,payload:e}},q=function(){return function(e){localStorage.clear(),e({type:b}),e(K())}},W=function(){return{type:f}},F=function(e){return{type:v,payload:e}},K=function(){return{type:g}},Q=n(13),Y=n(53),Z=n(24),$=n(2),ee=function(){var e=Object(s.c)((function(e){return e.auth})).name,t=Object(s.b)();return Object($.jsxs)("nav",{className:"bg-dark-lava shadow-lg",children:[Object($.jsx)("div",{className:"max-w-10xl mx-auto px-4",children:Object($.jsxs)("div",{className:"flex justify-between",children:[Object($.jsx)("div",{className:"flex space-x-7",children:Object($.jsx)("div",{className:"hidden md:flex items-center space-x-4",children:Object($.jsx)("p",{className:"py-4 px-2 text-alabaster",children:e})})}),Object($.jsx)("div",{className:"hidden md:flex items-center space-x-3 ",children:Object($.jsxs)("button",{onClick:function(){t(q())},className:"inline-flex py-2 px-2 font-bold text-alabaster bg-melon rounded transition duration-300",children:[Object($.jsx)(Z.b,{className:"mt-0.5 mr-1 h-5 w-5"})," Logout"]})}),Object($.jsx)("div",{className:"md:hidden flex items-center",children:Object($.jsx)("button",{className:"outline-none mobile-menu-button",children:Object($.jsx)("svg",{className:" w-6 h-6 text-gray-500 hover:text-green-500 ","x-show":"!showMenu",fill:"none","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",stroke:"currentColor",children:Object($.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),Object($.jsx)("div",{className:"hidden mobile-menu",children:Object($.jsxs)("ul",{className:"",children:[Object($.jsx)("li",{className:"active",children:Object($.jsx)("a",{href:"index.html",className:"block text-sm px-2 py-4 text-white bg-green-500 font-semibold",children:"Home"})}),Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#services",className:"block text-sm px-2 py-4 hover:bg-green-500 transition duration-300",children:"Services"})}),Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#about",className:"block text-sm px-2 py-4 hover:bg-green-500 transition duration-300",children:"About"})}),Object($.jsx)("li",{children:Object($.jsx)("a",{href:"#contact",className:"block text-sm px-2 py-4 hover:bg-green-500 transition duration-300",children:"Contact Us"})})]})})]})},te=function(e){var t=e.event,n=t.title,a=t.user;return Object($.jsxs)("div",{children:[Object($.jsx)("span",{children:n}),Object($.jsx)("br",{}),Object($.jsx)("strong",{children:a.name})]})},ne=n(27),ae=n(49),ce=n.n(ae),re=n(50),se=n.n(re),oe=function(){return{type:d}},le=function(){return{type:u}},ie=n(38),de=function(){var e=Object(s.b)();return Object($.jsxs)("button",{onClick:function(){e(function(){var e=Object(A.a)(I.a.mark((function e(t,n){var a,c,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().calendar.activeEvent._id,t(R()),e.prev=2,e.next=5,G("events/".concat(a),{},"DELETE");case 5:return c=e.sent,e.next=8,c.json();case 8:(r=e.sent).ok?t(R()):L.a.fire("Error",r.msg,"error"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[2,12]])})));return function(t,n){return e.apply(this,arguments)}}()),e(le())},className:"bg-red-400 p-2.5 border font-bold rounded-md text-alabaster flex justify-center w-full transition ease-in",children:[Object($.jsx)(ie.b,{className:"mt-0.5 mr-1 w-6 h-6"}),Object($.jsx)("span",{children:"Delete"})]})},ue={content:{top:"50%",left:"50%",right:"auto",bottom:"auto"}};ce.a.setAppElement("#root");var je=V()().minutes(0).seconds(0).add(1,"hours"),be=je.clone().add(1,"hours"),me={title:"",notes:"",start:je.toDate(),end:be.toDate()},he=function(){var e=Object(a.useState)(je.toDate()),t=Object(Q.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)(be.toDate()),r=Object(Q.a)(c,2),o=(r[0],r[1]),l=Object(a.useState)(!0),d=Object(Q.a)(l,2),u=d[0],j=d[1],b=Object(a.useState)(!0),m=Object(Q.a)(b,2),p=m[0],x=m[1],O=Object(a.useState)(me),f=Object(Q.a)(O,2),v=f[0],g=f[1],y=v.title,k=v.notes,w=v.start,N=v.end,E=Object(s.b)(),S=Object(s.c)((function(e){return e.ui})).modalOpen,C=Object(s.c)((function(e){return e.calendar})).activeEvent;Object(a.useEffect)((function(){g(C||me)}),[C,g]);var D=function(e){var t=e.target;g(Object(i.a)(Object(i.a)({},v),{},Object(ne.a)({},t.name,t.value)))},_=function(){E(le()),E({type:h}),g(me)};return Object($.jsxs)(ce.a,{isOpen:S,onRequestClose:_,style:ue,closeTimeoutMS:200,className:"bg-alabaster rounded-md text-dark-lava inline w-3/12y outline-none p-6 space-y-4",overlayClassName:"bg-dark-lava bg-opacity-50 bottom-0 left-0 right-0 top-0 fixed",children:[Object($.jsx)("h1",{className:"font-abril text-5xl",children:C?C.title:Object($.jsxs)("span",{children:["New ",Object($.jsx)("span",{className:"text-melon",children:"Event"})]})}),Object($.jsx)("hr",{className:"bg-dark-lava h-0.5 bg-opacity-50"}),Object($.jsxs)("form",{className:"space-y-3",onSubmit:function(e){e.preventDefault();var t=V()(w),n=V()(N);return t.isSameOrAfter(n)?j(!1):y.trim().length<2?x(!1):(E(C?function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n){var a,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G("events/".concat(e._id),e,"PUT");case 3:return a=t.sent,t.next=6,a.json();case 6:(c=t.sent).ok?n(B(e)):L.a.fire("Error",c.msg,"error"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}(v):function(e){return function(){var t=Object(A.a)(I.a.mark((function t(n,a){var c,r,s,o,l;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=a().auth,r=c.uid,s=c.name,t.prev=1,t.next=4,G("events",e,"POST");case 4:return o=t.sent,t.next=7,o.json();case 7:(l=t.sent).ok&&(e._id=l.event._id,e.user={_id:r,name:s},console.log(e),n(U(e))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),console.log(t.t0);case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(v)),j(!0),x(!0),void _())},children:[Object($.jsxs)("div",{className:"space-y-1",children:[Object($.jsx)("label",{children:"Date and hour starting"}),Object($.jsx)(se.a,{onChange:function(e){n(e),g(Object(i.a)(Object(i.a)({},v),{},{start:e}))},value:w,className:"bg-gray-50 block w-full p-1.5 rounded-md",calendarIcon:Object($.jsx)(Z.d,{className:"w-5 h-5"}),clearIcon:Object($.jsx)(Z.a,{className:"w-5 h-5"})})]}),Object($.jsxs)("div",{className:"space-y-1",children:[Object($.jsx)("label",{children:"Date and hour ending"}),!u&&Object($.jsx)("span",{className:"block text-red-400",children:"Error: End date must be greater than start date"}),Object($.jsx)(se.a,{onChange:function(e){o(e),g(Object(i.a)(Object(i.a)({},v),{},{end:e}))},value:N,minDate:w,className:"bg-gray-50 block w-full p-1.5 rounded-md",calendarIcon:Object($.jsx)(Z.d,{className:"w-5 h-5"}),clearIcon:Object($.jsx)(Z.a,{className:"w-5 h-5"})})]}),Object($.jsx)("hr",{className:"bg-dark-lava h-0.5 bg-opacity-50"}),Object($.jsxs)("div",{className:"space-y-1",children:[Object($.jsx)("label",{children:"Title and notes"}),!p&&Object($.jsx)("span",{className:"block text-red-400",children:"Error: Title too short"}),Object($.jsx)("input",{type:"text",className:"bg-gray-50 block w-full p-1.5 rounded-md focus:outline-none",placeholder:"Event title",name:"title",autoComplete:"off",onChange:D,value:y})]}),Object($.jsxs)("div",{children:[Object($.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"A short description"}),Object($.jsx)("div",{className:"form-group",children:Object($.jsx)("textarea",{type:"text",className:"bg-gray-50 block w-full p-1.5 rounded-md focus:outline-none",placeholder:"Notes",rows:"5",name:"notes",onChange:D,value:k})}),Object($.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Aditional info"})]}),Object($.jsxs)("button",{type:"submit",className:"hover:bg-melon bg-dark-lava p-2.5 border font-bold rounded-md text-alabaster flex justify-center w-full transition ease-in",children:[Object($.jsx)(Z.c,{className:"mt-1 mr-1 h-5 w-5"}),Object($.jsx)("span",{children:"Save"})]}),C&&Object($.jsx)(de,{})]})]})},pe=(n(118),function(){var e=Object(s.b)();return Object($.jsx)("button",{onClick:function(){e(oe())},className:"bg-melon p-4 absolute bottom-3 right-3 rounded-full z-10 text-dark-lava",children:Object($.jsx)(ie.a,{className:"w-6 h-6"})})}),xe=Object(Y.b)(V.a),Oe=function(){var e=Object(a.useState)(localStorage.getItem("lastView")||"month"),t=Object(Q.a)(e,2),n=t[0],c=t[1],r=Object(s.b)(),o=Object(s.c)((function(e){return e.calendar})).events,l=Object(s.c)((function(e){return e.auth})).uid;Object(a.useEffect)((function(){r(function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a,c;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,G("events");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,c=H(a.events),t(X(c)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[r]);return Object($.jsxs)("div",{children:[Object($.jsx)(ee,{}),Object($.jsxs)("div",{className:"mt-6",children:[Object($.jsx)(pe,{}),Object($.jsx)(Y.a,{localizer:xe,events:o,startAccessor:"start",endAccessor:"end",style:{height:"92vh"},eventPropGetter:function(e,t,n,a){return{style:{backgroundColor:l===e.user._id?"#e0afa0":"#463f3a",borderWidth:0,color:"#f4f3ee",display:"block"}}},onDoubleClickEvent:function(e){r(oe())},onSelectEvent:function(e){r(function(e){return{type:j,payload:e}}(e))},onView:function(e){c(e),localStorage.setItem("lastView",e)},view:n,components:{event:te}})]}),Object($.jsx)(he,{})]})},fe=function(){return Object($.jsx)("div",{children:Object($.jsx)("h1",{className:"text-3xl",children:"Loading..."})})},ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(Q.a)(t,2),c=n[0],r=n[1],s=function(){r(e)},o=function(e){var t=e.target;r(Object(i.a)(Object(i.a)({},c),{},Object(ne.a)({},t.name,t.value)))};return[c,o,s]},ge=function(){var e=ve({email:"",password:""}),t=Object(Q.a)(e,2),n=t[0],a=t[1],c=Object(s.b)(),r=n.email,o=n.password;return Object($.jsxs)("div",{className:"flex relative items-center right-16",children:[Object($.jsxs)("div",{className:"absolute -right-32 z-10 space-y-8 bg-gray-100 border border-dark-lava p-10 rounded-lg shadow-lg text-center",children:[Object($.jsxs)("h1",{className:"text-dark-lava font-abril text-6xl",children:["Log ",Object($.jsx)("span",{className:"text-melon",children:"in"})]}),Object($.jsxs)("div",{children:[Object($.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(function(e,t){return function(){var n=Object(A.a)(I.a.mark((function n(a){var c,r;return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,M("auth/login",{email:e,password:t},"POST");case 2:return c=n.sent,n.next=5,c.json();case 5:(r=n.sent).ok?(localStorage.setItem("token",r.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(F({uid:r.uid,name:r.name}))):L.a.fire("Error",r.msg,"error");case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r,o))},className:"space-y-3",children:[Object($.jsx)("input",{className:"block p-2 bg-gray-200 focus:outline-none placeholder-middle-gray text-dark-lava rounded-md w-full",type:"email",name:"email",placeholder:"Email",value:r,onChange:a}),Object($.jsx)("input",{className:"block p-2 bg-gray-200 focus:outline-none placeholder-middle-gray text-dark-lava rounded-md w-full",type:"password",name:"password",placeholder:"Password",value:o,onChange:a}),Object($.jsx)("button",{className:"block font-bold p-2 bg-melon text-dark-lava rounded-md w-full",type:"submit",children:"Log In"})]}),Object($.jsx)("div",{className:"mt-2",children:Object($.jsxs)("p",{className:"text-dark-lava",children:["Don't have an account?"," ",Object($.jsx)(D.b,{to:"/auth/signup",children:Object($.jsx)("span",{className:"text-melon font-bold",children:"Sign up"})})]})})]})]}),Object($.jsx)("div",{className:"relative z-0",children:Object($.jsx)("img",{className:"border border-dark-lava rounded-2xl",src:"https://cdn.pixabay.com/photo/2021/07/25/16/13/plants-6492284_960_720.jpg",alt:"plants"})})]})},ye=function(){var e=Object(s.b)(),t=ve({name:"",email:"",password:"",password2:""}),n=Object(Q.a)(t,2),a=n[0],c=n[1],r=a.name,o=a.email,l=a.password,i=a.password2;return Object($.jsxs)("div",{className:"flex flex-row-reverse relative items-center left-16",children:[Object($.jsxs)("div",{className:"absolute -left-32 z-10 space-y-8 bg-gray-100 border border-dark-lava p-10 rounded-lg shadow-lg",children:[Object($.jsxs)("h1",{className:"text-dark-lava font-abril text-6xl",children:["Sign ",Object($.jsx)("span",{className:"text-melon",children:"up"})]}),Object($.jsxs)("div",{children:[Object($.jsxs)("form",{onSubmit:function(t){return t.preventDefault(),l.length<5?L.a.fire("Error","Password must have at least 6 chars","error"):l!==i?L.a.fire("Error","Password must match","error"):void e(function(e,t,n){return function(){var a=Object(A.a)(I.a.mark((function a(c){var r,s;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,M("auth/signup",{name:e,email:t,password:n},"POST");case 2:return r=a.sent,a.next=5,r.json();case 5:(s=a.sent).ok?(localStorage.setItem("token",s.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(F({uid:s.uid,name:s.name}))):L.a.fire("Error",s.msg,"error");case 7:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(r,o,l))},className:"space-y-3",children:[Object($.jsx)("input",{className:"block p-2 bg-gray-200 focus:outline-none placeholder-middle-gray text-dark-lava rounded-md w-full",type:"text",name:"name",placeholder:"Name",value:r,onChange:c}),Object($.jsx)("input",{className:"block p-2 bg-gray-200 focus:outline-none placeholder-middle-gray text-dark-lava rounded-md w-full",type:"email",name:"email",placeholder:"Email",value:o,onChange:c}),Object($.jsx)("input",{className:"block p-2 bg-gray-200 focus:outline-none placeholder-middle-gray text-dark-lava rounded-md w-full",type:"password",name:"password",placeholder:"Password",value:l,onChange:c}),Object($.jsx)("input",{className:"block p-2 bg-gray-200 focus:outline-none placeholder-middle-gray text-dark-lava rounded-md w-full",type:"password",name:"password2",placeholder:"Confirm password",value:i,onChange:c}),Object($.jsx)("button",{className:"block font-bold p-2 bg-melon text-dark-lava w-full rounded-md",type:"submit",children:"Sign up"})]}),Object($.jsx)("div",{className:"mt-2",children:Object($.jsxs)("p",{className:"text-dark-lava",children:["Already have an account?"," ",Object($.jsx)(D.b,{to:"/auth/login",children:Object($.jsx)("span",{className:"text-melon font-bold",children:"Log in"})})]})})]})]}),Object($.jsx)("div",{className:"relative z-0",children:Object($.jsx)("img",{className:"border border-dark-lava rounded-2xl",src:"https://cdn.pixabay.com/photo/2021/04/25/15/41/flower-6206819_960_720.jpg",alt:"plants"})})]})},ke=function(){return Object($.jsx)("div",{children:Object($.jsx)("div",{className:"bg-gray-200 flex items-center justify-center margin-0 h-screen",children:Object($.jsxs)(_.d,{children:[Object($.jsx)(_.b,{exact:!0,path:"/auth/login",component:ge}),Object($.jsx)(_.b,{exact:!0,path:"/auth/signup",component:ye}),Object($.jsx)(_.a,{to:"/auth/login"})]})})})},we=n(39),Ne=function(e){var t=e.isAuthenticated,n=e.component,a=Object(we.a)(e,["isAuthenticated","component"]);return Object($.jsx)(_.b,Object(i.a)(Object(i.a)({},a),{},{component:function(e){return t?Object($.jsx)(n,Object(i.a)({},e)):Object($.jsx)(_.a,{to:"/auth/login"})}}))},Ee=function(e){var t=e.isAuthenticated,n=e.component,a=Object(we.a)(e,["isAuthenticated","component"]);return Object($.jsx)(_.b,Object(i.a)(Object(i.a)({},a),{},{component:function(e){return t?Object($.jsx)(_.a,{to:"/"}):Object($.jsx)(n,Object(i.a)({},e))}}))},Se=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.auth})),n=t.checking,c=t.uid;return Object(a.useEffect)((function(){e(function(){var e=Object(A.a)(I.a.mark((function e(t){var n,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G("auth/resignup");case 2:return n=e.sent,e.next=5,n.json();case 5:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(F({uid:a.uid,name:a.name}))):t(W());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?Object($.jsx)(fe,{}):Object($.jsx)(D.a,{children:Object($.jsx)("div",{children:Object($.jsxs)(_.d,{children:[Object($.jsx)(Ee,{isAuthenticated:!!c,path:"/auth",component:ke}),Object($.jsx)(Ne,{isAuthenticated:!!c,exact:!0,path:"/",component:Oe}),Object($.jsx)(_.a,{to:"/"})]})})})},Ce=function(){return Object($.jsx)(s.a,{store:C,children:Object($.jsx)(Se,{})})};r.a.render(Object($.jsx)(Ce,{}),document.getElementById("root"))},73:function(e,t,n){}},[[120,1,2]]]);
//# sourceMappingURL=main.7aae2c99.chunk.js.map